<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
  <div class="mb-6">
    <h1 class="text-3xl font-bold text-gray-900">設定</h1>
    <p class="mt-2 text-sm text-gray-600">アカウント設定を変更できます</p>
  </div>

  <div class="bg-white rounded-lg shadow">
    <div class="px-6 py-5 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900">プロフィール設定</h3>
    </div>

    <div class="p-6">
      <%= form_with(model: @user, url: profile_path, method: :patch, class: "space-y-6") do |form| %>
        <% if @user.errors.any? %>
          <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded">
            <h2 class="font-bold text-lg mb-2"><%= pluralize(@user.errors.count, "個のエラー") %>があります:</h2>
            <ul class="list-disc list-inside">
              <% @user.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- ユーザー名（読み取り専用） -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">ユーザー名</label>
          <div class="w-full px-3 py-2 border border-gray-200 rounded-md bg-gray-50 text-gray-500">
            <%= @user.username %>
          </div>
          <p class="mt-1 text-sm text-gray-500">ユーザー名は変更できません</p>
        </div>

        <!-- ニックネーム -->
        <div>
          <%= form.label :nickname, "ニックネーム", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= form.text_field :nickname, class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
          <p class="mt-1 text-sm text-gray-500">画面上に表示される名前です</p>
        </div>

        <!-- 通知設定 -->
        <div class="border-t border-gray-200 pt-6">
          <h4 class="text-sm font-medium text-gray-900 mb-4">通知設定</h4>
          <div class="flex items-center">
            <%= form.check_box :notification_enabled, class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" %>
            <%= form.label :notification_enabled, "通知を有効化", class: "ml-2 block text-sm text-gray-900" %>
          </div>
          <p class="mt-1 text-sm text-gray-500 ml-6">ローテーションでの順番通知などを受け取ります</p>
        </div>

        <!-- パスワード変更 -->
        <div class="border-t border-gray-200 pt-6">
          <h4 class="text-sm font-medium text-gray-900 mb-4">パスワード変更</h4>

          <div class="space-y-4">
            <div>
              <%= form.label :password, "新しいパスワード", class: "block text-sm font-medium text-gray-700 mb-1" %>
              <%= form.password_field :password, autocomplete: "new-password", class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
              <p class="mt-1 text-sm text-gray-500">変更しない場合は空欄のままにしてください</p>
            </div>

            <div>
              <%= form.label :password_confirmation, "新しいパスワード（確認）", class: "block text-sm font-medium text-gray-700 mb-1" %>
              <%= form.password_field :password_confirmation, autocomplete: "new-password", class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
            </div>
          </div>
        </div>

        <!-- 送信ボタン -->
        <div class="flex justify-end pt-4 border-t border-gray-200">
          <%= form.submit "保存", class: "px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 cursor-pointer" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
